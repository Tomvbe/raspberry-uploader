<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="US-en">
  <head>
    <title>Uploader</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
  </head>
  <body>
    <h1>File uploader</h1>

    <form method="POST" enctype="multipart/form-data">
      <div id="mediaSelection">
        <label for="type">Choose media type:</label>
        <select name="type" id="type" onchange="updateDirectoryList(event.target.value)">
          <option th:each="type : ${T(com.raspberry.uploader.service.MediaType).values()}"
                  th:value="${type}"
                  th:text="${type}">
          </option>
        </select>
      </div>
      <div id="directorySelection">
        Use existing directory:
        <label for="isExistingDirectoryYes">Yes</label>
        <input type="radio" id="isExistingDirectoryYes" name="isExistingDirectory" value="Yes" checked>
        <label for="isExistingDirectoryNo">No</label>
        <input type="radio" id="isExistingDirectoryNo" name="isExistingDirectory" value="No">
        <div id="newDirectory">
          <label for="newDirectoryInput">Group files in new directory:</label>
            <input id="newDirectoryInput" type="text" name="newDirectoryInput" />
        </div>
        <div id="existingDirectory">
          <label for="existingDirectoryInput">Choose existing directory:</label>
          <select id="existingDirectoryInput" name="existingDirectoryInput"></select>
        </div>
      </div>
      <div id="filesSelection">
        <div class="form-group files">
          <input id="dropper" type="file" name="files" oninput="createUploadTable(this.files)" multiple/>
        </div>
      </div>
      <div id="selectedFiles"></div>

      <input id="uploadButton" onclick="upload()" type="button" value="Upload"/>
    </form>

    <div class="errorContainer"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
    <script type="text/javascript" th:src="@{/js/upload.js}"></script>
  </body>
</html>
